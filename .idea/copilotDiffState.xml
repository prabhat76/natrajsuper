<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/natraj/data/woo/WooApi.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/natraj/data/woo/WooApi.kt" />
              <option name="originalContent" value="package com.example.natraj.data.woo&#10;&#10;import retrofit2.http.*&#10;&#10;interface WooApi {&#10;    // Categories with images&#10;    @GET(&quot;wp-json/wc/v3/products/categories&quot;)&#10;    suspend fun getCategories(&#10;        @Query(&quot;per_page&quot;) perPage: Int = 100,&#10;        @Query(&quot;page&quot;) page: Int = 1,&#10;        @Query(&quot;hide_empty&quot;) hideEmpty: Boolean = false&#10;    ): List&lt;WooCategory&gt;&#10;&#10;    // Products with filters&#10;    @GET(&quot;wp-json/wc/v3/products&quot;)&#10;    suspend fun getProducts(&#10;        @Query(&quot;per_page&quot;) perPage: Int = 20,&#10;        @Query(&quot;page&quot;) page: Int = 1,&#10;        @Query(&quot;category&quot;) category: Int? = null,&#10;        @Query(&quot;min_price&quot;) minPrice: Int? = null,&#10;        @Query(&quot;max_price&quot;) maxPrice: Int? = null,&#10;        @Query(&quot;attribute&quot;) attribute: Int? = null,&#10;        @Query(&quot;attribute_term&quot;) attributeTerm: Int? = null,&#10;        @Query(&quot;featured&quot;) featured: Boolean? = null,&#10;        @Query(&quot;orderby&quot;) orderBy: String? = null,&#10;        @Query(&quot;order&quot;) order: String? = null&#10;    ): List&lt;WooProduct&gt;&#10;&#10;    // Attributes and terms for filters&#10;    @GET(&quot;wp-json/wc/v3/products/attributes&quot;)&#10;    suspend fun getAttributes(): List&lt;WooAttribute&gt;&#10;&#10;    @GET(&quot;wp-json/wc/v3/products/attributes/{id}/terms&quot;)&#10;    suspend fun getAttributeTerms(@Path(&quot;id&quot;) id: Int): List&lt;WooAttributeTerm&gt;&#10;&#10;    // Orders&#10;    @GET(&quot;wp-json/wc/v3/orders&quot;)&#10;    suspend fun getOrders(&#10;        @Query(&quot;per_page&quot;) perPage: Int = 20,&#10;        @Query(&quot;page&quot;) page: Int = 1,&#10;        @Query(&quot;customer&quot;) customerId: Int? = null,&#10;        @Query(&quot;status&quot;) status: String? = null,&#10;        @Query(&quot;orderby&quot;) orderBy: String = &quot;date&quot;,&#10;        @Query(&quot;order&quot;) order: String = &quot;desc&quot;&#10;    ): List&lt;WooOrderResponse&gt;&#10;    &#10;    @POST(&quot;wp-json/wc/v3/orders&quot;)&#10;    suspend fun createOrder(@Body body: WooCreateOrderRequest): WooOrderResponse&#10;    &#10;    @GET(&quot;wp-json/wc/v3/orders/{id}&quot;)&#10;    suspend fun getOrder(@Path(&quot;id&quot;) orderId: Int): WooOrderResponse&#10;    &#10;    @PUT(&quot;wp-json/wc/v3/orders/{id}&quot;)&#10;    suspend fun updateOrder(@Path(&quot;id&quot;) orderId: Int, @Body body: WooOrderUpdateRequest): WooOrderResponse&#10;    &#10;    // Payment Gateways&#10;    @GET(&quot;wp-json/wc/v3/payment_gateways&quot;)&#10;    suspend fun getPaymentGateways(): List&lt;WooPaymentGateway&gt;&#10;    &#10;    @GET(&quot;wp-json/wc/v3/payment_gateways/{id}&quot;)&#10;    suspend fun getPaymentGateway(@Path(&quot;id&quot;) gatewayId: String): WooPaymentGateway&#10;    &#10;    // Shipping&#10;    @GET(&quot;wp-json/wc/v3/shipping/zones&quot;)&#10;    suspend fun getShippingZones(): List&lt;WooShippingZone&gt;&#10;    &#10;    @GET(&quot;wp-json/wc/v3/shipping/zones/{id}/methods&quot;)&#10;    suspend fun getShippingMethods(@Path(&quot;id&quot;) zoneId: Int): List&lt;WooShippingMethod&gt;&#10;    &#10;    // Customers&#10;    @POST(&quot;wp-json/wc/v3/customers&quot;)&#10;    suspend fun createCustomer(@Body body: WooCreateCustomerRequest): WooCustomer&#10;    &#10;    @GET(&quot;wp-json/wc/v3/customers/{id}&quot;)&#10;    suspend fun getCustomer(@Path(&quot;id&quot;) customerId: Int): WooCustomer&#10;    &#10;    @GET(&quot;wp-json/wc/v3/customers&quot;)&#10;    suspend fun getCustomers(&#10;        @Query(&quot;email&quot;) email: String? = null,&#10;        @Query(&quot;per_page&quot;) perPage: Int = 10,&#10;        @Query(&quot;page&quot;) page: Int = 1&#10;    ): List&lt;WooCustomer&gt;&#10;    &#10;    @PUT(&quot;wp-json/wc/v3/customers/{id}&quot;)&#10;    suspend fun updateCustomer(@Path(&quot;id&quot;) customerId: Int, @Body body: WooCustomerUpdateRequest): WooCustomer&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.natraj.data.woo&#10;&#10;import retrofit2.http.*&#10;&#10;interface WooApi {&#10;    // Categories with images&#10;    @GET(&quot;wp-json/wc/v3/products/categories&quot;)&#10;    suspend fun getCategories(&#10;        @Query(&quot;per_page&quot;) perPage: Int = 100,&#10;        @Query(&quot;page&quot;) page: Int = 1,&#10;        @Query(&quot;hide_empty&quot;) hideEmpty: Boolean = false&#10;    ): List&lt;WooCategory&gt;&#10;&#10;    // Products with filters&#10;    @GET(&quot;wp-json/wc/v3/products&quot;)&#10;    suspend fun getProducts(&#10;        @Query(&quot;per_page&quot;) perPage: Int = 20,&#10;        @Query(&quot;page&quot;) page: Int = 1,&#10;        @Query(&quot;category&quot;) category: Int? = null,&#10;        @Query(&quot;min_price&quot;) minPrice: Int? = null,&#10;        @Query(&quot;max_price&quot;) maxPrice: Int? = null,&#10;        @Query(&quot;attribute&quot;) attribute: Int? = null,&#10;        @Query(&quot;attribute_term&quot;) attributeTerm: Int? = null,&#10;        @Query(&quot;featured&quot;) featured: Boolean? = null,&#10;        @Query(&quot;orderby&quot;) orderBy: String? = null,&#10;        @Query(&quot;order&quot;) order: String? = null&#10;    ): List&lt;WooProduct&gt;&#10;&#10;    // Attributes and terms for filters&#10;    @GET(&quot;wp-json/wc/v3/products/attributes&quot;)&#10;    suspend fun getAttributes(): List&lt;WooAttribute&gt;&#10;&#10;    @GET(&quot;wp-json/wc/v3/products/attributes/{id}/terms&quot;)&#10;    suspend fun getAttributeTerms(@Path(&quot;id&quot;) id: Int): List&lt;WooAttributeTerm&gt;&#10;&#10;    // Orders&#10;    @GET(&quot;wp-json/wc/v3/orders&quot;)&#10;    suspend fun getOrders(&#10;        @Query(&quot;per_page&quot;) perPage: Int = 20,&#10;        @Query(&quot;page&quot;) page: Int = 1,&#10;        @Query(&quot;customer&quot;) customerId: Int? = null,&#10;        @Query(&quot;status&quot;) status: String? = null,&#10;        @Query(&quot;orderby&quot;) orderBy: String = &quot;date&quot;,&#10;        @Query(&quot;order&quot;) order: String = &quot;desc&quot;&#10;    ): List&lt;WooOrderResponse&gt;&#10;    &#10;    @POST(&quot;wp-json/wc/v3/orders&quot;)&#10;    suspend fun createOrder(@Body body: WooCreateOrderRequest): WooOrderResponse&#10;    &#10;    @GET(&quot;wp-json/wc/v3/orders/{id}&quot;)&#10;    suspend fun getOrder(@Path(&quot;id&quot;) orderId: Int): WooOrderResponse&#10;    &#10;    @PUT(&quot;wp-json/wc/v3/orders/{id}&quot;)&#10;    suspend fun updateOrder(@Path(&quot;id&quot;) orderId: Int, @Body body: WooOrderUpdateRequest): WooOrderResponse&#10;    &#10;    // Payment Gateways&#10;    @GET(&quot;wp-json/wc/v3/payment_gateways&quot;)&#10;    suspend fun getPaymentGateways(): List&lt;WooPaymentGateway&gt;&#10;    &#10;    @GET(&quot;wp-json/wc/v3/payment_gateways/{id}&quot;)&#10;    suspend fun getPaymentGateway(@Path(&quot;id&quot;) gatewayId: String): WooPaymentGateway&#10;    &#10;    // Shipping&#10;    @GET(&quot;wp-json/wc/v3/shipping/zones&quot;)&#10;    suspend fun getShippingZones(): List&lt;WooShippingZone&gt;&#10;    &#10;    @GET(&quot;wp-json/wc/v3/shipping/zones/{id}/methods&quot;)&#10;    suspend fun getShippingMethods(@Path(&quot;id&quot;) zoneId: Int): List&lt;WooShippingMethod&gt;&#10;    &#10;    // Customers&#10;    @POST(&quot;wp-json/wc/v3/customers&quot;)&#10;    suspend fun createCustomer(@Body body: WooCreateCustomerRequest): WooCustomer&#10;    &#10;    @GET(&quot;wp-json/wc/v3/customers/{id}&quot;)&#10;    suspend fun getCustomer(@Path(&quot;id&quot;) customerId: Int): WooCustomer&#10;    &#10;    @GET(&quot;wp-json/wc/v3/customers&quot;)&#10;    suspend fun getCustomers(&#10;        @Query(&quot;email&quot;) email: String? = null,&#10;        @Query(&quot;per_page&quot;) perPage: Int = 10,&#10;        @Query(&quot;page&quot;) page: Int = 1&#10;    ): List&lt;WooCustomer&gt;&#10;    &#10;    @PUT(&quot;wp-json/wc/v3/customers/{id}&quot;)&#10;    suspend fun updateCustomer(@Path(&quot;id&quot;) customerId: Int, @Body body: WooCustomerUpdateRequest): WooCustomer&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/natraj/ui/activities/LoginActivity.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/natraj/ui/activities/LoginActivity.kt" />
              <option name="originalContent" value="package com.example.natraj&#10;&#10;import android.content.Intent&#10;import android.os.Bundle&#10;import android.util.Log&#10;import android.widget.Button&#10;import android.widget.EditText&#10;import android.widget.TextView&#10;import android.widget.Toast&#10;import androidx.appcompat.app.AppCompatActivity&#10;import androidx.lifecycle.lifecycleScope&#10;import com.example.natraj.MainActivity&#10;import com.example.natraj.R&#10;import com.example.natraj.SignupActivity&#10;import com.example.natraj.data.WooRepository&#10;import com.example.natraj.util.CustomToast&#10;import com.example.natraj.util.sync.AccountSyncManager&#10;import kotlinx.coroutines.Dispatchers&#10;import kotlinx.coroutines.launch&#10;import kotlinx.coroutines.withContext&#10;&#10;class LoginActivity : AppCompatActivity() {&#10;    &#10;    private lateinit var emailInput: EditText&#10;    private lateinit var passwordInput: EditText&#10;    private lateinit var loginBtn: Button&#10;    private lateinit var signupLink: TextView&#10;    private lateinit var skipLink: TextView&#10;    &#10;    override fun onCreate(savedInstanceState: Bundle?) {&#10;        super.onCreate(savedInstanceState)&#10;        setContentView(R.layout.activity_login)&#10;        &#10;        // Hide action bar&#10;        supportActionBar?.hide()&#10;        &#10;        initializeViews()&#10;        setupClickListeners()&#10;    }&#10;    &#10;    private fun initializeViews() {&#10;        emailInput = findViewById(R.id.login_email_input)&#10;        passwordInput = findViewById(R.id.login_password_input)&#10;        loginBtn = findViewById(R.id.login_btn)&#10;        signupLink = findViewById(R.id.signup_link)&#10;        skipLink = findViewById(R.id.skip_login)&#10;    }&#10;    &#10;    private fun setupClickListeners() {&#10;        loginBtn.setOnClickListener {&#10;            val email = emailInput.text.toString().trim()&#10;            val password = passwordInput.text.toString().trim()&#10;            &#10;            if (validateInput(email, password)) {&#10;                performLogin(email)&#10;            }&#10;        }&#10;        &#10;        signupLink.setOnClickListener {&#10;            startActivity(Intent(this, SignupActivity::class.java))&#10;        }&#10;        &#10;        skipLink.setOnClickListener {&#10;            // Allow guest mode&#10;            navigateToMain()&#10;        }&#10;    }&#10;    &#10;    private fun validateInput(email: String, password: String): Boolean {&#10;        if (email.isEmpty()) {&#10;            emailInput.error = &quot;Email is required&quot;&#10;            emailInput.requestFocus()&#10;            return false&#10;        }&#10;        &#10;        if (!android.util.Patterns.EMAIL_ADDRESS.matcher(email).matches()) {&#10;            emailInput.error = &quot;Enter a valid email&quot;&#10;            emailInput.requestFocus()&#10;            return false&#10;        }&#10;        &#10;        if (password.isEmpty()) {&#10;            passwordInput.error = &quot;Password is required&quot;&#10;            passwordInput.requestFocus()&#10;            return false&#10;        }&#10;        &#10;        if (password.length &lt; 6) {&#10;            passwordInput.error = &quot;Password must be at least 6 characters&quot;&#10;            passwordInput.requestFocus()&#10;            return false&#10;        }&#10;        &#10;        return true&#10;    }&#10;    &#10;    private fun performLogin(email: String) {&#10;        // Disable button and show progress&#10;        loginBtn.isEnabled = false&#10;        loginBtn.text = &quot;Logging in...&quot;&#10;        &#10;        lifecycleScope.launch {&#10;            try {&#10;                // Check if customer exists in WooCommerce&#10;                val repo = WooRepository(this@LoginActivity)&#10;                &#10;                val customer = withContext(Dispatchers.IO) {&#10;                    repo.getCustomerByEmail(email)&#10;                }&#10;                &#10;                if (customer != null) {&#10;                    // Customer found - login&#10;                    val fullName = &quot;${customer.first_name} ${customer.last_name}&quot;.trim()&#10;                    val displayName = fullName.ifBlank { email.substringBefore(&quot;@&quot;) }&#10;                    &#10;                    AuthManager.login(displayName, email, &quot;&quot;, customer.id)&#10;                    &#10;                    // Sync account data from WooCommerce&#10;                    try {&#10;                        AccountSyncManager.fullSyncFromWoo(this@LoginActivity)&#10;                        Log.d(&quot;LoginActivity&quot;, &quot;Account synced successfully&quot;)&#10;                    } catch (syncException: Exception) {&#10;                        Log.w(&quot;LoginActivity&quot;, &quot;Account sync failed, but login continues&quot;, syncException)&#10;                    }&#10;                    &#10;                    CustomToast.showSuccess(this@LoginActivity, &quot;Welcome back, $displayName!&quot;)&#10;                    navigateToMain()&#10;                } else {&#10;                    // Customer not found&#10;                    loginBtn.isEnabled = true&#10;                    loginBtn.text = &quot;LOGIN&quot;&#10;                    CustomToast.showError(&#10;                        this@LoginActivity, &#10;                        &quot;Account not found. Please sign up first.&quot;,&#10;                        Toast.LENGTH_LONG&#10;                    )&#10;                }&#10;                &#10;            } catch (e: Exception) {&#10;                Log.e(&quot;LoginActivity&quot;, &quot;Login failed&quot;, e)&#10;                loginBtn.isEnabled = true&#10;                loginBtn.text = &quot;LOGIN&quot;&#10;                &#10;                // For development: allow local login if WooCommerce is not configured&#10;                val name = email.substringBefore(&quot;@&quot;)&#10;                AuthManager.login(name, email, &quot;&quot;, 0)&#10;                &#10;                // Try to sync if possible (won't work for local login, but safe to call)&#10;                try {&#10;                    AccountSyncManager.fullSyncFromWoo(this@LoginActivity)&#10;                } catch (syncException: Exception) {&#10;                    Log.d(&quot;LoginActivity&quot;, &quot;Sync not available for local login&quot;)&#10;                }&#10;                &#10;                CustomToast.showWarning(this@LoginActivity, &quot;Logged in locally (WooCommerce unavailable)&quot;)&#10;                navigateToMain()&#10;            }&#10;        }&#10;    }&#10;    &#10;    private fun navigateToMain() {&#10;        val intent = Intent(this, MainActivity::class.java)&#10;        intent.flags = Intent.FLAG_ACTIVITY_NEW_TASK or Intent.FLAG_ACTIVITY_CLEAR_TASK&#10;        startActivity(intent)&#10;        finish()&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.natraj&#10;&#10;import android.content.Intent&#10;import android.os.Bundle&#10;import android.util.Log&#10;import android.widget.Button&#10;import android.widget.EditText&#10;import android.widget.TextView&#10;import android.widget.Toast&#10;import androidx.appcompat.app.AppCompatActivity&#10;import androidx.lifecycle.lifecycleScope&#10;import com.example.natraj.MainActivity&#10;import com.example.natraj.R&#10;import com.example.natraj.SignupActivity&#10;import com.example.natraj.data.WooRepository&#10;import com.example.natraj.util.AuthManager&#10;import com.example.natraj.util.CustomToast&#10;import com.example.natraj.util.sync.AccountSyncManager&#10;import kotlinx.coroutines.Dispatchers&#10;import kotlinx.coroutines.launch&#10;import kotlinx.coroutines.withContext&#10;&#10;class LoginActivity : AppCompatActivity() {&#10;    &#10;    private lateinit var emailInput: EditText&#10;    private lateinit var passwordInput: EditText&#10;    private lateinit var loginBtn: Button&#10;    private lateinit var signupLink: TextView&#10;    private lateinit var skipLink: TextView&#10;    &#10;    override fun onCreate(savedInstanceState: Bundle?) {&#10;        super.onCreate(savedInstanceState)&#10;        setContentView(R.layout.activity_login)&#10;        &#10;        // Hide action bar&#10;        supportActionBar?.hide()&#10;        &#10;        initializeViews()&#10;        setupClickListeners()&#10;    }&#10;    &#10;    private fun initializeViews() {&#10;        emailInput = findViewById(R.id.login_email_input)&#10;        passwordInput = findViewById(R.id.login_password_input)&#10;        loginBtn = findViewById(R.id.login_btn)&#10;        signupLink = findViewById(R.id.signup_link)&#10;        skipLink = findViewById(R.id.skip_login)&#10;    }&#10;    &#10;    private fun setupClickListeners() {&#10;        loginBtn.setOnClickListener {&#10;            val email = emailInput.text.toString().trim()&#10;            val password = passwordInput.text.toString().trim()&#10;            &#10;            if (validateInput(email, password)) {&#10;                performLogin(email)&#10;            }&#10;        }&#10;        &#10;        signupLink.setOnClickListener {&#10;            startActivity(Intent(this, SignupActivity::class.java))&#10;        }&#10;        &#10;        skipLink.setOnClickListener {&#10;            // Allow guest mode&#10;            navigateToMain()&#10;        }&#10;    }&#10;    &#10;    private fun validateInput(email: String, password: String): Boolean {&#10;        if (email.isEmpty()) {&#10;            emailInput.error = &quot;Email is required&quot;&#10;            emailInput.requestFocus()&#10;            return false&#10;        }&#10;        &#10;        if (!android.util.Patterns.EMAIL_ADDRESS.matcher(email).matches()) {&#10;            emailInput.error = &quot;Enter a valid email&quot;&#10;            emailInput.requestFocus()&#10;            return false&#10;        }&#10;        &#10;        if (password.isEmpty()) {&#10;            passwordInput.error = &quot;Password is required&quot;&#10;            passwordInput.requestFocus()&#10;            return false&#10;        }&#10;        &#10;        if (password.length &lt; 6) {&#10;            passwordInput.error = &quot;Password must be at least 6 characters&quot;&#10;            passwordInput.requestFocus()&#10;            return false&#10;        }&#10;        &#10;        return true&#10;    }&#10;    &#10;    private fun performLogin(email: String) {&#10;        // Disable button and show progress&#10;        loginBtn.isEnabled = false&#10;        loginBtn.text = &quot;Logging in...&quot;&#10;        &#10;        lifecycleScope.launch {&#10;            try {&#10;                // Check if customer exists in WooCommerce&#10;                val repo = WooRepository(this@LoginActivity)&#10;                &#10;                val customer = withContext(Dispatchers.IO) {&#10;                    repo.getCustomerByEmail(email)&#10;                }&#10;                &#10;                if (customer != null) {&#10;                    // Customer found - login&#10;                    val fullName = &quot;${customer.first_name} ${customer.last_name}&quot;.trim()&#10;                    val displayName = fullName.ifBlank { email.substringBefore(&quot;@&quot;) }&#10;                    &#10;                    AuthManager.login(displayName, email, &quot;&quot;, customer.id)&#10;                    &#10;                    // Sync account data from WooCommerce&#10;                    try {&#10;                        AccountSyncManager.fullSyncFromWoo(this@LoginActivity)&#10;                        Log.d(&quot;LoginActivity&quot;, &quot;Account synced successfully&quot;)&#10;                    } catch (syncException: Exception) {&#10;                        Log.w(&quot;LoginActivity&quot;, &quot;Account sync failed, but login continues&quot;, syncException)&#10;                    }&#10;                    &#10;                    CustomToast.showSuccess(this@LoginActivity, &quot;Welcome back, $displayName!&quot;)&#10;                    navigateToMain()&#10;                } else {&#10;                    // Customer not found&#10;                    loginBtn.isEnabled = true&#10;                    loginBtn.text = &quot;LOGIN&quot;&#10;                    CustomToast.showError(&#10;                        this@LoginActivity, &#10;                        &quot;Account not found. Please sign up first.&quot;,&#10;                        Toast.LENGTH_LONG&#10;                    )&#10;                }&#10;                &#10;            } catch (e: Exception) {&#10;                Log.e(&quot;LoginActivity&quot;, &quot;Login failed&quot;, e)&#10;                loginBtn.isEnabled = true&#10;                loginBtn.text = &quot;LOGIN&quot;&#10;                &#10;                // For development: allow local login if WooCommerce is not configured&#10;                val name = email.substringBefore(&quot;@&quot;)&#10;                AuthManager.login(name, email, &quot;&quot;, 0)&#10;                &#10;                // Try to sync if possible (won't work for local login, but safe to call)&#10;                try {&#10;                    AccountSyncManager.fullSyncFromWoo(this@LoginActivity)&#10;                } catch (syncException: Exception) {&#10;                    Log.d(&quot;LoginActivity&quot;, &quot;Sync not available for local login&quot;)&#10;                }&#10;                &#10;                CustomToast.showWarning(this@LoginActivity, &quot;Logged in locally (WooCommerce unavailable)&quot;)&#10;                navigateToMain()&#10;            }&#10;        }&#10;    }&#10;    &#10;    private fun navigateToMain() {&#10;        val intent = Intent(this, MainActivity::class.java)&#10;        intent.flags = Intent.FLAG_ACTIVITY_NEW_TASK or Intent.FLAG_ACTIVITY_CLEAR_TASK&#10;        startActivity(intent)&#10;        finish()&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/natraj/ui/activities/MainActivity.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/natraj/ui/activities/MainActivity.kt" />
              <option name="originalContent" value="package com.example.natraj&#10;&#10;import android.Manifest&#10;import android.content.pm.PackageManager&#10;import android.os.Build&#10;import android.os.Bundle&#10;import android.widget.FrameLayout&#10;import androidx.appcompat.app.AppCompatActivity&#10;import androidx.core.app.ActivityCompat&#10;import androidx.core.content.ContextCompat&#10;import androidx.core.view.ViewCompat&#10;import androidx.core.view.WindowInsetsCompat&#10;import androidx.fragment.app.Fragment&#10;import com.example.natraj.R&#10;import com.example.natraj.ui.fragments.CartFragment&#10;import com.example.natraj.ui.fragments.CategoriesFragment&#10;import com.example.natraj.ui.fragments.HomeFragment&#10;import com.example.natraj.ui.fragments.ProfileFragment&#10;import com.example.natraj.AuthManager&#10;import com.example.natraj.BlogManager&#10;import com.example.natraj.CartManager&#10;import com.example.natraj.OfferManager&#10;import com.example.natraj.ProductManager&#10;import com.google.android.material.bottomnavigation.BottomNavigationView&#10;&#10;class MainActivity : AppCompatActivity() {&#10;    private val NOTIFICATION_PERMISSION_CODE = 100&#10;    private var cartBadgeCallback: (() -&gt; Unit)? = null&#10;    &#10;    override fun onCreate(savedInstanceState: Bundle?) {&#10;        super.onCreate(savedInstanceState)&#10;        setContentView(R.layout.activity_main)&#10;&#10;        // Handle window insets for the fragment container&#10;        val fragmentContainer = findViewById&lt;FrameLayout&gt;(R.id.fragment_container)&#10;        ViewCompat.setOnApplyWindowInsetsListener(fragmentContainer) { view, insets -&gt;&#10;            val systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars())&#10;            // Only apply top inset to avoid overlapping with bottom navigation&#10;            view.setPadding(0, systemBars.top, 0, 0)&#10;            insets&#10;        }&#10;&#10;        // Handle bottom navigation insets&#10;        val bottomNav = findViewById&lt;BottomNavigationView&gt;(R.id.bottom_navigation)&#10;        ViewCompat.setOnApplyWindowInsetsListener(bottomNav) { view, insets -&gt;&#10;            val systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars())&#10;            // Apply bottom inset to prevent overlap with system navigation&#10;            view.setPadding(0, 0, 0, systemBars.bottom)&#10;            insets&#10;        }&#10;&#10;        // Request notification permission for Android 13+&#10;        requestNotificationPermission()&#10;&#10;        // Initialize AuthManager&#10;        android.util.Log.d(&quot;MainActivity&quot;, &quot;Initializing AuthManager...&quot;)&#10;        AuthManager.initialize(this)&#10;        android.util.Log.d(&quot;MainActivity&quot;, &quot;AuthManager initialized. Logged in: ${AuthManager.isLoggedIn()}&quot;)&#10;        &#10;        // Initialize ProductManager&#10;        android.util.Log.d(&quot;MainActivity&quot;, &quot;Initializing ProductManager...&quot;)&#10;        ProductManager.initialize(this)&#10;        android.util.Log.d(&quot;MainActivity&quot;, &quot;ProductManager initialized. Products: ${ProductManager.getAllProducts().size}&quot;)&#10;        &#10;        // Initialize OfferManager&#10;        android.util.Log.d(&quot;MainActivity&quot;, &quot;Initializing OfferManager...&quot;)&#10;        OfferManager.initialize(this)&#10;        android.util.Log.d(&quot;MainActivity&quot;, &quot;OfferManager initialized. Offers: ${OfferManager.getAllOffers().size}&quot;)&#10;        &#10;        // Initialize BlogManager&#10;        android.util.Log.d(&quot;MainActivity&quot;, &quot;Initializing BlogManager...&quot;)&#10;        BlogManager.initialize(this)&#10;        android.util.Log.d(&quot;MainActivity&quot;, &quot;BlogManager initialized. Posts: ${BlogManager.getAllBlogPosts().size}&quot;)&#10;&#10;        bottomNav.setOnItemSelectedListener { item -&gt;&#10;            when (item.itemId) {&#10;                R.id.nav_home -&gt; switchFragment(HomeFragment(), &quot;Home&quot;)&#10;                R.id.nav_categories -&gt; switchFragment(CategoriesFragment(), &quot;Categories&quot;)&#10;                R.id.nav_cart -&gt; switchFragment(CartFragment(), &quot;Cart&quot;)&#10;                R.id.nav_profile -&gt; switchFragment(ProfileFragment(), &quot;Profile&quot;)&#10;            }&#10;            true&#10;        }&#10;        // Show HomeFragment by default, or open cart if requested&#10;        if (savedInstanceState == null) {&#10;            val openCart = intent.getBooleanExtra(&quot;open_cart&quot;, false)&#10;            val openHome = intent.getBooleanExtra(&quot;open_home&quot;, false)&#10;            &#10;            when {&#10;                openCart -&gt; {&#10;                    switchFragment(CartFragment(), &quot;Cart&quot;)&#10;                    bottomNav.selectedItemId = R.id.nav_cart&#10;                }&#10;                openHome -&gt; {&#10;                    switchFragment(HomeFragment(), &quot;Home&quot;)&#10;                    bottomNav.selectedItemId = R.id.nav_home&#10;                }&#10;                else -&gt; switchFragment(HomeFragment(), &quot;Home&quot;)&#10;            }&#10;        }&#10;&#10;        // Setup cart badge listener&#10;        val badge = bottomNav.getOrCreateBadge(R.id.nav_cart)&#10;        badge.isVisible = false // Hide the badge completely&#10;        &#10;        // Comment out cart badge functionality&#10;        /*&#10;        cartBadgeCallback = {&#10;            try {&#10;                val count = CartManager.getItemCount()&#10;                if (count &gt; 0) {&#10;                    badge.isVisible = true&#10;                    badge.number = count&#10;                } else {&#10;                    badge.isVisible = false&#10;                }&#10;            } catch (e: Exception) {&#10;                badge.isVisible = false&#10;            }&#10;        }&#10;        CartManager.registerListener(cartBadgeCallback!!)&#10;        cartBadgeCallback?.invoke()&#10;        */&#10;    }&#10;&#10;    override fun onDestroy() {&#10;        cartBadgeCallback?.let { CartManager.unregisterListener(it) }&#10;        super.onDestroy()&#10;    }&#10;&#10;    fun switchFragment(fragment: Fragment, tag: String = &quot;&quot;) {&#10;        supportFragmentManager.beginTransaction()&#10;            .setCustomAnimations(&#10;                android.R.anim.fade_in,&#10;                android.R.anim.fade_out,&#10;                android.R.anim.fade_in,&#10;                android.R.anim.fade_out&#10;            )&#10;            .replace(R.id.fragment_container, fragment, tag)&#10;            .commit()&#10;    }&#10;&#10;    private fun requestNotificationPermission() {&#10;        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.TIRAMISU) {&#10;            if (ContextCompat.checkSelfPermission(&#10;                    this,&#10;                    Manifest.permission.POST_NOTIFICATIONS&#10;                ) != PackageManager.PERMISSION_GRANTED&#10;            ) {&#10;                ActivityCompat.requestPermissions(&#10;                    this,&#10;                    arrayOf(Manifest.permission.POST_NOTIFICATIONS),&#10;                    NOTIFICATION_PERMISSION_CODE&#10;                )&#10;            }&#10;        }&#10;    }&#10;&#10;    fun switchToCategories() {&#10;        findViewById&lt;BottomNavigationView&gt;(R.id.bottom_navigation).selectedItemId = R.id.nav_categories&#10;    }&#10;}" />
              <option name="updatedContent" value="package com.example.natraj.ui.activities&#10;&#10;import android.Manifest&#10;import android.content.pm.PackageManager&#10;import android.os.Build&#10;import android.os.Bundle&#10;import android.widget.FrameLayout&#10;import androidx.appcompat.app.AppCompatActivity&#10;import androidx.core.app.ActivityCompat&#10;import androidx.core.content.ContextCompat&#10;import androidx.core.view.ViewCompat&#10;import androidx.core.view.WindowInsetsCompat&#10;import androidx.fragment.app.Fragment&#10;import com.example.natraj.R&#10;import com.example.natraj.ui.fragments.CartFragment&#10;import com.example.natraj.ui.fragments.CategoriesFragment&#10;import com.example.natraj.ui.fragments.HomeFragment&#10;import com.example.natraj.ui.fragments.ProfileFragment&#10;import com.example.natraj.util.manager.AuthManager&#10;import com.example.natraj.util.manager.BlogManager&#10;import com.example.natraj.util.manager.CartManager&#10;import com.example.natraj.util.manager.OfferManager&#10;import com.example.natraj.util.manager.ProductManager&#10;import com.google.android.material.bottomnavigation.BottomNavigationView&#10;&#10;class MainActivity : AppCompatActivity() {&#10;    private val NOTIFICATION_PERMISSION_CODE = 100&#10;    private var cartBadgeCallback: (() -&gt; Unit)? = null&#10;    &#10;    override fun onCreate(savedInstanceState: Bundle?) {&#10;        super.onCreate(savedInstanceState)&#10;        setContentView(R.layout.activity_main)&#10;&#10;        // Handle window insets for the fragment container&#10;        val fragmentContainer = findViewById&lt;FrameLayout&gt;(R.id.fragment_container)&#10;        ViewCompat.setOnApplyWindowInsetsListener(fragmentContainer) { view, insets -&gt;&#10;            val systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars())&#10;            // Only apply top inset to avoid overlapping with bottom navigation&#10;            view.setPadding(0, systemBars.top, 0, 0)&#10;            insets&#10;        }&#10;&#10;        // Handle bottom navigation insets&#10;        val bottomNav = findViewById&lt;BottomNavigationView&gt;(R.id.bottom_navigation)&#10;        ViewCompat.setOnApplyWindowInsetsListener(bottomNav) { view, insets -&gt;&#10;            val systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars())&#10;            // Apply bottom inset to prevent overlap with system navigation&#10;            view.setPadding(0, 0, 0, systemBars.bottom)&#10;            insets&#10;        }&#10;&#10;        // Request notification permission for Android 13+&#10;        requestNotificationPermission()&#10;&#10;        // Initialize AuthManager&#10;        android.util.Log.d(&quot;MainActivity&quot;, &quot;Initializing AuthManager...&quot;)&#10;        AuthManager.initialize(this)&#10;        android.util.Log.d(&quot;MainActivity&quot;, &quot;AuthManager initialized. Logged in: ${AuthManager.isLoggedIn()}&quot;)&#10;        &#10;        // Initialize ProductManager&#10;        android.util.Log.d(&quot;MainActivity&quot;, &quot;Initializing ProductManager...&quot;)&#10;        ProductManager.initialize(this)&#10;        android.util.Log.d(&quot;MainActivity&quot;, &quot;ProductManager initialized. Products: ${ProductManager.getAllProducts().size}&quot;)&#10;        &#10;        // Initialize OfferManager&#10;        android.util.Log.d(&quot;MainActivity&quot;, &quot;Initializing OfferManager...&quot;)&#10;        OfferManager.initialize(this)&#10;        android.util.Log.d(&quot;MainActivity&quot;, &quot;OfferManager initialized. Offers: ${OfferManager.getAllOffers().size}&quot;)&#10;        &#10;        // Initialize BlogManager&#10;        android.util.Log.d(&quot;MainActivity&quot;, &quot;Initializing BlogManager...&quot;)&#10;        BlogManager.initialize(this)&#10;        android.util.Log.d(&quot;MainActivity&quot;, &quot;BlogManager initialized. Posts: ${BlogManager.getAllBlogPosts().size}&quot;)&#10;&#10;        bottomNav.setOnItemSelectedListener { item -&gt;&#10;            when (item.itemId) {&#10;                R.id.nav_home -&gt; switchFragment(HomeFragment(), &quot;Home&quot;)&#10;                R.id.nav_categories -&gt; switchFragment(CategoriesFragment(), &quot;Categories&quot;)&#10;                R.id.nav_cart -&gt; switchFragment(CartFragment(), &quot;Cart&quot;)&#10;                R.id.nav_profile -&gt; switchFragment(ProfileFragment(), &quot;Profile&quot;)&#10;            }&#10;            true&#10;        }&#10;        // Show HomeFragment by default, or open cart if requested&#10;        if (savedInstanceState == null) {&#10;            val openCart = intent.getBooleanExtra(&quot;open_cart&quot;, false)&#10;            val openHome = intent.getBooleanExtra(&quot;open_home&quot;, false)&#10;            &#10;            when {&#10;                openCart -&gt; {&#10;                    switchFragment(CartFragment(), &quot;Cart&quot;)&#10;                    bottomNav.selectedItemId = R.id.nav_cart&#10;                }&#10;                openHome -&gt; {&#10;                    switchFragment(HomeFragment(), &quot;Home&quot;)&#10;                    bottomNav.selectedItemId = R.id.nav_home&#10;                }&#10;                else -&gt; switchFragment(HomeFragment(), &quot;Home&quot;)&#10;            }&#10;        }&#10;&#10;        // Setup cart badge listener&#10;        val badge = bottomNav.getOrCreateBadge(R.id.nav_cart)&#10;        badge.isVisible = false // Hide the badge completely&#10;        &#10;        // Comment out cart badge functionality&#10;        /*&#10;        cartBadgeCallback = {&#10;            try {&#10;                val count = CartManager.getItemCount()&#10;                if (count &gt; 0) {&#10;                    badge.isVisible = true&#10;                    badge.number = count&#10;                } else {&#10;                    badge.isVisible = false&#10;                }&#10;            } catch (e: Exception) {&#10;                badge.isVisible = false&#10;            }&#10;        }&#10;        CartManager.registerListener(cartBadgeCallback!!)&#10;        cartBadgeCallback?.invoke()&#10;        */&#10;    }&#10;&#10;    override fun onDestroy() {&#10;        cartBadgeCallback?.let { CartManager.unregisterListener(it) }&#10;        super.onDestroy()&#10;    }&#10;&#10;    fun switchFragment(fragment: Fragment, tag: String = &quot;&quot;) {&#10;        supportFragmentManager.beginTransaction()&#10;            .setCustomAnimations(&#10;                android.R.anim.fade_in,&#10;                android.R.anim.fade_out,&#10;                android.R.anim.fade_in,&#10;                android.R.anim.fade_out&#10;            )&#10;            .replace(R.id.fragment_container, fragment, tag)&#10;            .commit()&#10;    }&#10;&#10;    private fun requestNotificationPermission() {&#10;        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.TIRAMISU) {&#10;            if (ContextCompat.checkSelfPermission(&#10;                    this,&#10;                    Manifest.permission.POST_NOTIFICATIONS&#10;                ) != PackageManager.PERMISSION_GRANTED&#10;            ) {&#10;                ActivityCompat.requestPermissions(&#10;                    this,&#10;                    arrayOf(Manifest.permission.POST_NOTIFICATIONS),&#10;                    NOTIFICATION_PERMISSION_CODE&#10;                )&#10;            }&#10;        }&#10;    }&#10;&#10;    fun switchToCategories() {&#10;        findViewById&lt;BottomNavigationView&gt;(R.id.bottom_navigation).selectedItemId = R.id.nav_categories&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/natraj/ui/activities/SplashActivity.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/natraj/ui/activities/SplashActivity.kt" />
              <option name="originalContent" value="package com.example.natraj&#10;&#10;import android.content.Intent&#10;import android.os.Bundle&#10;import android.os.Handler&#10;import android.os.Looper&#10;import android.view.animation.AnimationUtils&#10;import android.view.WindowManager&#10;import android.widget.ImageView&#10;import android.widget.TextView&#10;import androidx.appcompat.app.AppCompatActivity&#10;import androidx.cardview.widget.CardView&#10;import com.example.natraj.util.manager.AuthManager&#10;&#10;class SplashActivity : AppCompatActivity() {&#10;    &#10;    private val splashDelay = 3000L // 3 seconds&#10;&#10;    override fun onCreate(savedInstanceState: Bundle?) {&#10;        super.onCreate(savedInstanceState)&#10;        setContentView(R.layout.activity_splash)&#10;&#10;        // Hide the action bar if present&#10;        supportActionBar?.hide()&#10;        &#10;        // Initialize AuthManager&#10;        AuthManager.initialize(this)&#10;&#10;        // Set full screen flags&#10;        window.setFlags(&#10;            WindowManager.LayoutParams.FLAG_FULLSCREEN,&#10;            WindowManager.LayoutParams.FLAG_FULLSCREEN&#10;        )&#10;&#10;        // Start animations&#10;        startAnimations()&#10;&#10;        // Navigate to appropriate screen after delay&#10;        Handler(Looper.getMainLooper()).postDelayed({&#10;            val intent = if (AuthManager.isLoggedIn()) {&#10;                Intent(this, MainActivity::class.java)&#10;            } else {&#10;                Intent(this, LoginActivity::class.java)&#10;            }&#10;            startActivity(intent)&#10;            finish()&#10;        }, splashDelay)&#10;    }&#10;&#10;    private fun startAnimations() {&#10;        try {&#10;            // Logo card animation - scale and fade in&#10;            val logoCard = findViewById&lt;CardView&gt;(R.id.logo_card)&#10;            val scaleAnimation = AnimationUtils.loadAnimation(this, R.anim.scale_fade_in)&#10;            logoCard.startAnimation(scaleAnimation)&#10;&#10;            // Brand name animation - fade in with delay&#10;            val brandName = findViewById&lt;TextView&gt;(R.id.brand_name)&#10;            val fadeInAnimation = AnimationUtils.loadAnimation(this, R.anim.fade_in)&#10;            fadeInAnimation.startOffset = 300&#10;            brandName.startAnimation(fadeInAnimation)&#10;&#10;            // Subtitle animation - fade in with delay&#10;            val subtitle = findViewById&lt;TextView&gt;(R.id.subtitle_text)&#10;            val subtitleAnimation = AnimationUtils.loadAnimation(this, R.anim.fade_in)&#10;            subtitleAnimation.startOffset = 500&#10;            subtitle.startAnimation(subtitleAnimation)&#10;&#10;            // Loading container animation - slide up and fade in&#10;            val loadingContainer = findViewById&lt;android.view.View&gt;(R.id.loading_container)&#10;            val slideUpAnimation = AnimationUtils.loadAnimation(this, R.anim.slide_up_fade_in)&#10;            slideUpAnimation.startOffset = 700&#10;            loadingContainer.startAnimation(slideUpAnimation)&#10;&#10;        } catch (e: Exception) {&#10;            android.util.Log.e(&quot;SplashActivity&quot;, &quot;Error starting animations&quot;, e)&#10;        }&#10;    }&#10;}" />
              <option name="updatedContent" value="package com.example.natraj.ui.activities&#10;&#10;import android.content.Intent&#10;import android.os.Bundle&#10;import android.os.Handler&#10;import android.os.Looper&#10;import android.view.animation.AnimationUtils&#10;import android.view.WindowManager&#10;import android.widget.ImageView&#10;import android.widget.TextView&#10;import androidx.appcompat.app.AppCompatActivity&#10;import androidx.cardview.widget.CardView&#10;import com.example.natraj.util.manager.AuthManager&#10;&#10;class SplashActivity : AppCompatActivity() {&#10;    &#10;    private val splashDelay = 3000L // 3 seconds&#10;&#10;    override fun onCreate(savedInstanceState: Bundle?) {&#10;        super.onCreate(savedInstanceState)&#10;        setContentView(R.layout.activity_splash)&#10;&#10;        // Hide the action bar if present&#10;        supportActionBar?.hide()&#10;        &#10;        // Initialize AuthManager&#10;        AuthManager.initialize(this)&#10;&#10;        // Set full screen flags&#10;        window.setFlags(&#10;            WindowManager.LayoutParams.FLAG_FULLSCREEN,&#10;            WindowManager.LayoutParams.FLAG_FULLSCREEN&#10;        )&#10;&#10;        // Start animations&#10;        startAnimations()&#10;&#10;        // Navigate to appropriate screen after delay&#10;        Handler(Looper.getMainLooper()).postDelayed({&#10;            val intent = if (AuthManager.isLoggedIn()) {&#10;                Intent(this, MainActivity::class.java)&#10;            } else {&#10;                Intent(this, LoginActivity::class.java)&#10;            }&#10;            startActivity(intent)&#10;            finish()&#10;        }, splashDelay)&#10;    }&#10;&#10;    private fun startAnimations() {&#10;        try {&#10;            // Logo card animation - scale and fade in&#10;            val logoCard = findViewById&lt;CardView&gt;(R.id.logo_card)&#10;            val scaleAnimation = AnimationUtils.loadAnimation(this, R.anim.scale_fade_in)&#10;            logoCard.startAnimation(scaleAnimation)&#10;&#10;            // Brand name animation - fade in with delay&#10;            val brandName = findViewById&lt;TextView&gt;(R.id.brand_name)&#10;            val fadeInAnimation = AnimationUtils.loadAnimation(this, R.anim.fade_in)&#10;            fadeInAnimation.startOffset = 300&#10;            brandName.startAnimation(fadeInAnimation)&#10;&#10;            // Subtitle animation - fade in with delay&#10;            val subtitle = findViewById&lt;TextView&gt;(R.id.subtitle_text)&#10;            val subtitleAnimation = AnimationUtils.loadAnimation(this, R.anim.fade_in)&#10;            subtitleAnimation.startOffset = 500&#10;            subtitle.startAnimation(subtitleAnimation)&#10;&#10;            // Loading container animation - slide up and fade in&#10;            val loadingContainer = findViewById&lt;android.view.View&gt;(R.id.loading_container)&#10;            val slideUpAnimation = AnimationUtils.loadAnimation(this, R.anim.slide_up_fade_in)&#10;            slideUpAnimation.startOffset = 700&#10;            loadingContainer.startAnimation(slideUpAnimation)&#10;&#10;        } catch (e: Exception) {&#10;            android.util.Log.e(&quot;SplashActivity&quot;, &quot;Error starting animations&quot;, e)&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>